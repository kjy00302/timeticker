# 시리얼 통신

시계는 시리얼 통신을 통해 시간 설정, 동작 설정 등을 한다.

제어는 소프트웨어를 통해 이루어지는 것을 가정하였다.

모든 통신 시작은 0xff로 시작하며 응답이 성공할 시 0x01을 보낸다. 반환하는 값이 있으면 0x02와 (byte) 길이를 대신 보낸다. 별도의 끝이나 검증은 없다. 2바이트 이상의 자료형은 리틀 엔디언 기준이다.

참고: 아두이노는 기본적으로 64바이트 시리얼 수신 버퍼를 가진다. AVR은 리틀 엔디언이다.


## 명령어들
 - 0x00대 (기초 동작)
   - 0x01 (동작확인)
     - 매개변수 없음
     - 시계가 잘 동작중인지 확인한다.
   - 0x02 설정 플래그 쓰기
     - 0x02, (byte) 플래그
   - 0x03 설정 플래그 읽기
     - 매개변수 없음
     - 반환: (byte) 플래그
 - 0x10대 (시간 동작)
   - 0x11 (동기화)
     - 매개변수 없음
     - GPS를 동작시켜 시간을 자동으로 설정한다.
   - 0x12 시간 설정
     - 0x12, (byte) 시, (byte)분, (byte)초
     - RTC에 저장된 시간을 설정한다. 시간은 24시간으로 처리됨.
   - 0x13 시간 읽기
     - 반환: (byte) 시, (byte)분, (byte)초
 - 0x20대 (디스플레이 동작)
   - 0x21 화면 초기화
     - 매개변수 없음
     - 화면을 비운다.
   - 0x22 화면 밝기 제어
     - 0x22 (byte) 밝기
     - 밝기는 0~15 사이이다.
   - 0x23 텍스트 보내기
     - 0x23 (byte) 길이, (short...) 16비트 문자 (길이만큼)
     - 텍스트를 버퍼에 보낸다.
   - 0x24 화면 직접 제어
     - 0x24 (byte...) 화면 값 (64개)
     - 화면을 시리얼로 직접 제어한다.
   - 0x25 화면 업데이트 빈도
     - 0x25 (byte) 밀리초 시간
 - 0x30대 (폰트 동작)
   - 0x32 eeprom 쓰기
     - 0x32 (short) 주소 (byte*16) 데이터
   - 0x33 eeprom 읽기
     - 0x33 (short) 주소
     - 반환: (byte*32) 데이터
 - 0x40대 (기타 동작)
   - 0x41 온습도 가져오기
     - 매개변수 없음
     - 반환: (signed short) 온도 (unsigned int) 습도
     - 받아온 값에서 온도는 100을 나누고, 습도는 1024를 나눈다
   - 0x42, 0x43 이벤트 플래그 쓰기/읽기
     - 설정 플래그 쓰기/읽기(0x02, 0x03)와 방법은 같다
   - 0x44 재시동
     - ¯\\_(ツ)_/¯
